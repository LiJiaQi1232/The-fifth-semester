<template>
<div>
  <!-- åŸºæœ¬æ•°æ®ç±»åž‹ -->
  <!-- <p>{{name}}||{{age}}</p>
  <button @click="onClickHandler">button</button> -->
  <!-- 1.6 å¼•ç”¨è¡Œæ•°æ®ç±»åž‹ -->
  <!-- <p> {{person.name}}|| {{person.age}}</p>
    <button @click="onClickHandler">button</button> -->
    <!-- åŸºæœ¬æ•°æ®ç±»åž‹ -->
      <!-- <p> {{name}}</p>
    <button @click="onClickHandler">button</button> -->
    <!-- 2.è®¡ç®—å±žæ€§ Computed -->
    <!-- <input type="text" v-model="search">
    <ul>
      <li v-for="item in firstNames" :key="item">{{item}}</li>
    </ul> -->
    <!-- 3. ç›‘å¬ watch -->
    <!-- 3.1 ç›‘å¬åŸºæœ¬æ•°æ®ç±»åž‹å“åº”æ•°æ®  -->
    <!-- <input type="text" v-model="text"> -->
    <!-- 3.2 ç›‘å¬å¼•ç”¨æ•°æ®ç±»åž‹çš„å“åº”å¼æ•°æ® -->
     <!-- <button @click="onClickHandler">{{person.name}}</button>  -->
     <!--3.4 ç›‘å¬å“åº”å¼æ•°æ®å†…éƒ¨çš„å…·ä½“å±žæ€§ï¼ˆå¼•ç”¨æ•°æ®ç±»åž‹ï¼‰ -->
  <!-- <p>{{person.brand.title}}||{{person.name}} </p>
  <button @click="changeBrandTitle">title</button>
  <button @click="changeName">name</button> -->
  <!-- <p>{{person.name}}</p>
  <button @click="onClickHandler">button</button>  -->
  <!-- 3.6 ç›‘å¬å¤šå€¼å˜åŒ– -->
  <!-- <input type="text" v-model="firstName">
  <input type="text" v-model="lastName"> -->
  
  <!-- 4. toRef
  <p>{{name}}</p>
  <p>{{person.brand.name}}</p>
  <button @click="onClickHandler">button</button> -->

  <!-- 5.toRefs -->
  <!-- <p>
{{ name }} {{ age }} {{ brand.title }} {{ brand.year }}
  </p> -->

  <!-- 6.ç»„ä»¶é€šè®¯ï¼šçˆ¶å­ä¼ å‚ -->
  <div>
    I am father component
  </div>
<hr/>
<ChildComp :msg="msg"></ChildComp>
<button @click="onClickHandler">button</button>
</div>
  
</template>

<script>
// 1.4 å¼•å…¥ref
import {ref,reactive,computed,watch,watchEffect,toRef,toRefs} from "vue"
// å¼•å…¥å­ç»„ä»¶
import ChildComp from "./components/ChildComp.vue"
export default {

  // setup(){
  //   // 1.1setupå‡½æ•°å†…éƒ¨thisä¸ºundefined 
  //   // console.log(this);
  //   // 1.3 setupå‡½æ•°çš„è¿”å›žå€¼ä¸ºå¯¹è±¡ç±»åž‹ 
  //   // æ³¨æ„ï¼šsetupæ–¹æ³•ä¸­å£°æ˜Žçš„å˜é‡è™½å¯åœ¨æ¨¡æ¿ä¸­æ˜¾ç¤º ä½†æ˜¯ä¸æ˜¯å“åº”å¼æ•°æ® 
  //   let name="å¼ ä¸‰";
  //   let age=20
  //   const onClickHandler=()=>{
  //     name="æŽå››",
  //     age=30
  //   }
  //   console.log(name,age); //å¼ ä¸‰ 20
  //   return{
  //     name,
  //     age,
  //     onClickHandler
  //   } 
  // },
   //1.2 setupå‡½æ•°åœ¨ä»»ä½•ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹‹å‰æ‰§è¡Œ
  // beforeCreate() {
  //   console.log("before create");
  // },


  // 1.4 ref ç”¨äºŽåˆ›å»ºå“åº”å¼æ•°æ® å³æ•°æ®å˜åŒ–è§†å›¾æ›´æ–°
  // ä½¿ç”¨refå‡½æ•°åˆ›å»ºåŸºæœ¬æ•°æ®ç±»åž‹çš„å“åº”å¼æ•°æ®
    // setup(){
    //   const name=ref("å¼ ä¸‰")
    //   const age=ref(20)
    //   // 1.5 é€šè¿‡valueå±žæ€§ä¿®æ”¹æ•°æ®
    //   const onClickHandler=()=>{
    //     name.value="æŽå››",
    //     age.value=30
    //   }
    //   return {
    //     name,age,onClickHandler
    //   }
    // }

    // 1.6 ä½¿ç”¨refåˆ›å»ºå¼•ç”¨åž‹æ•°æ®ç±»åž‹çš„å“åº”å¼æ•°æ®
  // setup(){
  //   const person=ref({name:'å¼ ä¸‰',age:20})
  //   const onClickHandler=()=>{
  //     person.value.name="æŽå››"
  //     person.value.age=30
  //   }
  //   return{
  //     person,
  //     onClickHandler
  //   }
  // }

  // 1.7.1 reactive ç”¨äºŽ åˆ›å»ºå“åº”å¼æ•°æ®  åˆ›å»ºåŸºäºŽå¼•ç”¨æ•°æ®ç±»åž‹çš„å“åº”å¼æ•°æ®ã€‚
  // setup() { 
  //   const person=reactive({name:'å¼ ä¸‰',age:20});
  //   const onClickHandler=()=>{
  //     person.name="æŽå››",
  //     person.age=30
  //   }
  //   return {
  //     person,
  //     onClickHandler
  //   }
  // }
 
  // 1.7.2 reactive å¯¹åŸºæœ¬æ•°æ®ç±»åž‹ä¸èµ·ä½œç”¨  value cannot be made reactive: å¼ ä¸‰
  // setup() {
  //   let name=reactive("å¼ ä¸‰")
  //   const onClickHandler=()=>{
  //     name="å“‡å“ˆå“ˆ"
  //   }
  //   return{
  //     name,onClickHandler
  //   }
  // }

  // 1.7.3 ä½¿ç”¨reactiveè¿›è¡Œæ•´ä½“èµ‹å€¼ éœ€è¦éåŽ†
  //  åœ¨ç‚¹å‡»æŒ‰é’®åŽå°† `newPerson` ä¸­çš„å€¼èµ‹å€¼ç»™ `person`
  // setup() {
  //     let person=reactive({name:'å¼ ä¸‰',age:18})
  //     const newPerson=reactive({name:'æŽå››',age:50})
  //     const onClickHandler=()=>{
  //       for(const item in newPerson){
  //         person[item]=newPerson[item]
  //       }
  //     }
  //     return{
  //       person,
  //       onClickHandler
  //     }
  // }

  // 1.7.4 ä½¿ç”¨refè¿›è¡Œæ•´ä½“èµ‹å€¼
  // setup() {
  //   let person=ref({name:'å¼ ä¸‰',age:18})
  //   const newPerson=ref({name:'æŽå››',age:40})
  //   const onClickHandler=()=>{
  //  person.value=newPerson.value
  //   }
  // return{
  //   person,
  //   // newPerson,
  //   onClickHandler
  // }
  // }
  

  // 2.è®¡ç®—å±žæ€§ Computed ä½¿ç”¨åŽŸæœ‰å“åº”å¼æ•°æ®è¿›è¡Œè®¡ç®—å±žæ€§çš„åˆ›å»º å›žè°ƒå‡½æ•°çš„è¿”å›žå€¼å°±æ˜¯è®¡ç®—ç»“æžœ
  // setup() {
  //   const names=ref([
  //       "æž—ä¿Šæ°",
  //     "å­™ç‡•å§¿",
  //     "å‘¨æ°ä¼¦",
  //     "å¼ æƒ å¦¹",
  //     "åˆ˜è‹¥è‹±",
  //     "æž—å®¥å˜‰",
  //     "åˆ˜å¾·åŽ",
  //     "å¼ éŸ¶æ¶µ",
  //     "å‘¨ç¬”ç•…",
  //     "å­™æ¥ "
  //   ])
  //   const search=ref("")
  // const firstNames=computed(()=>names.value.filter(item=>item.includes(search.value)))
  // return{
  //   search,firstNames
  // }
  // }

  // 3.ç›‘å¬çŠ¶æ€ watch  ç”¨äºŽç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–
  // 3.1 ä½¿ç”¨watchç›‘å¬åŸºæœ¬æ•°æ®ç±»åž‹å“åº”å¼æ•°æ®  ä¸éœ€è¦ä½¿ç”¨value
  // setup() {
  //   const text=ref("")
  //   watch(text,(current,previous)=>{
  //     console.log("current",current);  //çŽ°åœ¨çš„å€¼
  //     console.log("previous",previous); //æ›´æ–°å‰çš„å€¼
  //   })
  //   return{
  //     text
  //   }
  // }
  // 3.2 ç›‘å¬å¼•ç”¨æ•°æ®ç±»åž‹çš„å“åº”å¼æ•°æ®
  // setup(){
  //   const person=ref({name:'å¼ ä¸‰'});
  //   const onClickHandler=()=>{
  //     person.value.name="æŽå››"
  //   }
  //   watch(person.value,(current)=>{
  //     console.log(current,'current');  //{name: 'æŽå››'} 
  //   })
  //   return{
  //     person,
  //     onClickHandler
  //   }
  // }

  // 3.3 ç›‘å¬å“åº”å¼æ•°æ®å†…éƒ¨çš„å…·ä½“å±žæ€§ï¼ˆåŸºæœ¬æ•°æ®ç±»åž‹ï¼‰
  // setup(){
  //   const person=ref({name:"å“‡å“ˆ"})
  // const onClickHandler=()=>{
  //     person.value.name="æŽå››"
  //   }
  //   watch(()=>person.value.name,(current)=>{
  //         console.log(current,'current');   //æŽå›› current
  //   })
  //   return{
  //     person,
  //     onClickHandler
  //   }
  // }

  // 3.4 ç›‘å¬å“åº”å¼æ•°æ®å†…éƒ¨çš„å…·ä½“å±žæ€§ï¼ˆå¼•ç”¨æ•°æ®ç±»åž‹ï¼‰
  // setup(){
  //   const person=ref({ brand: { title: "å®é©¬" }, name: "å¼ ä¸‰" })
  //   const changeBrandTitle=()=>{
  //     person.value.brand.title="å¥”é©°"
  //   }
  //   const changeName=()=>{
  //     person.value.name="å“‡å“ˆå“ˆ"
  //   }
  //   watch(person.value.brand,(current)=>{
  //     console.log(current);
  //   })
  //   return{
  //     person,
  //     changeBrandTitle,
  //     changeName
  //   }
  // }
// 3.5 watchç›‘å¬åŸºäºŽreactiveåˆ›å»ºçš„å“åº”å¼æ•°æ®
// setup(){
//   const person=reactive({name:'å¼ ä¸‰'})
//   const onClickHandler=()=>{
//     person.name="wahah"
//   }
//   watch(person,(current)=>{
//     console.log(current);
//   })
//   return{
//     person,onClickHandler
//   }
// }

//3.6 ç›‘å¬å¤šå€¼å˜åŒ–
// setup(){
//   const firstName=ref("")
//   const lastName=ref("")
//   watch([firstName,lastName],current=>{
//     console.log(current);
//   })
//   return{
//     firstName,
//     lastName
//   }
// }

//3.7 ä½¿watchç›‘å¬æ•°æ®åœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡
// setup() {
//   const firstName=ref("hello")
//   const lastName=ref("world")
// watch([firstName,lastName],current=>{
//   console.log(current); //['hello', 'world']
// },
// {immediate:true }
// )
// return{
//   firstName,
//   lastName
// }
// }

// watchffect ç›‘å¬çŠ¶æ€  å’Œwatchä¸€æ · éƒ½æ˜¯ç”¨äºŽç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–
// åŒºåˆ«ï¼š watchEffect åªå…³å¿ƒæ•°æ®çš„æœ€æ–°å€¼ ä¸å…³å¿ƒæ—§å€¼ é»˜è®¤ä¼šåœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡

// setup(){
// const firstName=ref("hello")
//   const lastName=ref("world")
//   watchEffect(()=>{
//     console.log(firstName.value); //hello
//     console.log(lastName.value);  //world
//   })
//   return{
//     firstName,
//     lastName
//   }
// }

// 4. toRef ç”¨äºŽå°†å“åº”å¼æ•°æ®å†…éƒ¨çš„æ™®é€šæ•°æ®è½¬æ¢ä¸ºå“åº”å¼æ•°æ® 
//æ³¨ï¼šè½¬æ¢åŽçš„æ•°æ®å’ŒåŽŸå§‹æ•°æ®å­˜åœ¨å¼•ç”¨å…³ç³» å½“åŽŸå§‹æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒtoRefè½¬æ¢åŽçš„æ•°æ®ä¹Ÿä¼šè·Ÿç€å˜åŒ–
// setup() {
//   const person=ref({name:'å“‡å“ˆå“ˆ'})
//   const onClickHandler=()=>{
//     person.value.name="bobySeven"
//   };
//   return{
//     name:toRef(person.value,'name'),
//     person,
//     onClickHandler
//   }
// }
// 4.1 éœ€æ±‚ï¼šå½“å“åº”å¼æ•°æ®çš„ç»“æž„å±‚çº§è¾ƒæ·±æ—¶ å¯å¦åœ¨åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ—¶èƒ½å¤Ÿç®€åŒ–ç»“æž„å±‚çº§
// setup() {
//   const person=ref({ brand: { name: "å®é©¬" } });
//   const onClickHandler=()=>{
//     person.value.brand.name="å®é©¬miniðŸ¤¡"
//   };
//   return{
//     name:toRef(person.value.brand,'name'),
//     person,
//     onClickHandler
//   }
// }

// 5. toRefs toRefä¸€æ¬¡åªèƒ½è½¬æ¢ä¸€ä¸ªæ•°æ® é€šè¿‡toRefså¯ä»¥å®žçŽ°æ‰¹é‡æ•°æ®è½¬æ¢
// setup() {
//   const person=reactive({
//     name:'å¼ ä¸‰',
//     age:20,
//     brand:{title:'å®é©¬',year:1}
//   })
//   return{
//     ...toRefs(person)
//   }
// }

// 6.ç»„ä»¶é€šè®¯
// çˆ¶->å­ é€šè¿‡ props å‘å­ç»„ä»¶ä¼ é€’æ•°æ®
components:{ChildComp},
setup() {
  const msg=ref("a message from father")
  const onClickHandler=()=>{
    msg.value="a message from parentðŸ˜€"
  }
  return{
    msg,
    onClickHandler
  }
}










}
</script>
